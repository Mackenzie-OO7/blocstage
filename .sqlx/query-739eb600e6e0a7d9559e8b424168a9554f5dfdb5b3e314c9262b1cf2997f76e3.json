{
  "db_name": "PostgreSQL",
  "query": "\n            SELECT \n                COALESCE(SUM(\n                    CASE \n                        WHEN t.transaction_sponsorship_fee IS NOT NULL \n                        THEN t.amount - t.transaction_sponsorship_fee\n                        ELSE t.amount\n                    END\n                ), 0) as revenue\n            FROM transactions t\n            JOIN tickets tk ON t.ticket_id = tk.id\n            JOIN ticket_types tt ON tk.ticket_type_id = tt.id\n            WHERE \n                tt.event_id = $1 \n                AND t.status = 'completed'\n            ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "revenue",
        "type_info": "Numeric"
      }
    ],
    "parameters": {
      "Left": [
        "Uuid"
      ]
    },
    "nullable": [
      null
    ]
  },
  "hash": "739eb600e6e0a7d9559e8b424168a9554f5dfdb5b3e314c9262b1cf2997f76e3"
}
